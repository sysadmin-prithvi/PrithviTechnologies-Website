"use strict";(()=>{var v=null,d=()=>{document.addEventListener("click",t=>{let i=t.composedPath()[0];v=i instanceof Element?i.closest("a, area"):null})};addEventListener("DOMContentLoaded",d);function c(){return v}var o,n,l,a,g,y=t=>{history.state?.vtbagId??history.replaceState({vtbagId:history.length},""),n=parseInt(sessionStorage.getItem("vtbag-id")??"NaN",10),a=history.state.vtbagId,o=sessionStorage.getItem("vtbag-navigation-type"),sessionStorage.setItem("vtbag-id",""+a),l=sessionStorage.getItem("vtbag-from"),g=sessionStorage.getItem("vtbag-to")};addEventListener("pagereveal",y);var S=t=>{o=t.activation.navigationType,l=t.activation.from.url??"",g=t.activation.entry.url??"",n=history.state?.vtbagId,a=o==="push"?n+(l===g?0:1):o==="replace"?n:t.activation.entry.index!==-1?n+(t.activation.entry.index-t.activation.from.index):NaN,sessionStorage.setItem("vtbag-navigation-type",o),sessionStorage.setItem("vtbag-from",l),sessionStorage.setItem("vtbag-to",g)};addEventListener("pageswap",S);var f="data-vtbag-link-types",p="vtbag-all-link-types",u=t=>{let i=c();if(!t.viewTransition)return;let s=JSON.parse(sessionStorage.getItem(p)??"[]"),e="";if(!isNaN(a))if(a<n)e=(s[a]??"").split(/\s*\/\s*/)[0]??"";else{o==="traverse"?e=s[n]:(i&&(e=i.getAttribute(f)??""),s[n]=e,sessionStorage.setItem(p,JSON.stringify(s)));let r=e.split(/\s*\/\s*/);n===a?e=r[~~((r.length-1)/2)]??"":e=r[r.length-1]??""}m(e+" old",t)};addEventListener("pageswap",u);var T=t=>{if(!t.viewTransition)return;let i=JSON.parse(sessionStorage.getItem(p)??"[]"),s=i[a]??"";if(a<n)s=s.split(/\s*\/\s*/)[0]??"";else{let e=(i[n]??"").split(/\s*\/\s*/);n===a?s=e[~~((e.length-1)/2)]??"":s=e[e.length-1]??""}m(s+" new",t)};addEventListener("pagereveal",T);function m(t,i){let s=t.trim();return s.length>0&&s.split(/\s+/).forEach(e=>i.viewTransition?.types?.add(e)),t}})();
